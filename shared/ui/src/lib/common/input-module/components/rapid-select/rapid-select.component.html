<div class="rapid-select">
    <label class="rapid-select__label">{{ label }}</label>
    <div 
        class="rapid-select__display" 
        [ngClass]="{ 'rapid-select__display--active': optionsVisible }" 
        (click)="toggleOptionsVisible()" 
    >
        <ng-container *ngIf="selectValue.icon" [ngTemplateOutlet]="iconTemplate" [ngTemplateOutletContext]="{ $implicit: selectValue.icon || '' }"></ng-container>
        {{ selectValue.label || placeholder }}</div>
    <ng-container
        *ngIf="optionsVisible"
        [ngTemplateOutlet]="selectOptions"
        [ngTemplateOutletContext]="{ $implicit: options }"
    ></ng-container>
    <rapid-icon 
        class="rapid-select__icon" 
        name="chevron-down"
        [ngClass]="{ 'rapid-select__icon--active': optionsVisible }" 
    ></rapid-icon>
</div>

<ng-template #selectOptions let-options>
    <div class="rapid-select__option-container">
        <div *ngFor="let option of options" 
            class="rapid-select__option-container__item"
            (click)="onValueChange(option)"
        >
            <ng-container [ngTemplateOutlet]="iconTemplate" [ngTemplateOutletContext]="{ $implicit: option.icon }"></ng-container>
            {{ option.label }}
        </div>
    </div>
</ng-template>